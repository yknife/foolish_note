# 分片：Shard

## 7.1 分片的基本概念

如过用一句话来概括，分片可以理解为 索引的碎片。并且所有碎片都是可以无限复制的

## 7.2 分片的种类

- 主分片（primary shard）:
- 副本分片（replica shard）:

## 7.3 分片的基本策略

- 一个索引包含一个或多个分片，在7.0之前默认五个主分片，每个主分片一个副本；在7.0之后默认一个主分片。副本可以在索引创建之后修改数量，但是主分片的数量一旦确定不可修改，只能创建索引
- 每个分片都是一个Lucene实例，有完整的创建索引和处理请求的能力
- ES会自动再nodes上做分片均衡 shard reblance
- 一个doc不可能同时存在于多个主分片中，但是当每个主分片的副本数量不为一时，可以同时存在于多个副本中。
- `主分片和其副本分片`不能同时存在于同一个节点上。
- `完全相同的副本`不能同时存在于同一个节点上。

## 7.4 分片的作用和意义

- 高可用性：提高分布式服务的高可用性。
- 提高性能：提供系统服务的吞吐量和并发响应的能力
- 易扩展：当集群的性能不满足业务要求时，可以方便快速的扩容集群，而无需停止服务。